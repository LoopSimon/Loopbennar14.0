namespace = olavlund

#Elections
country_event = {
    id = olavlund.1
    title =  olavlund.1.t
    desc =  olavlund.1.d
    picture = ELECTION_REPUBLICAN_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        has_reform = olavish_clans
        NOT = { has_country_flag = in_olavish_election }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = in_olavish_election
        }
    }
	
	after = {
		hidden_effect = {
            clr_country_flag = in_olavish_election
        }
	}
	
	#Keep Current Ruler
	option = {
		name = olavlund.1.a
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 0
				NOT = { republican_tradition = 25 }
			}	
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 50 }
			}				
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 75 }
			}	
			modifier = {
				factor = 2.0
				republican_tradition = 90
			}		
			
			#Anbennar
			modifier = {
				factor = 2.0
				ruler_has_mage_personality = yes
			}	
		}
		custom_tooltip = remains_ruler
		change_adm = 1
		change_dip = 1
		change_mil = 1
		add_scaled_republican_tradition = -10
		random_list = {
			10 = {
				add_adm_power = 50
			}
			10 = {
				add_dip_power = 50
			}
			10 = {
				add_mil_power = 50
			}
		}
	}

	#Avnkaup - Mixed Candidate
	option = {
		name = olavlund.1.b
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 3
				max_random_dip = 3
				change_adm = 2
				change_dip = 2
				change_mil = 2
				dynasty = "Vejordsson"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 3
				max_random_dip = 3
				change_adm = 2
				change_dip = 2
				change_mil = 2
				dynasty = "Vejordsson"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_avnkaup
		}
	}
	
	#Urkvistan - Military Candidate
	option = {
		name = olavlund.1.c
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 2
				max_random_dip = 2
				change_adm = 3
				change_dip = 2
				change_mil = 3
				dynasty = "Ebonfrost"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 2
				max_random_dip = 2
				change_adm = 3
				change_dip = 2
				change_mil = 3
				dynasty = "Ebonfrost"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_urkvistan
		}
	}
	
	#Naugsvol - Administrative Candidate
	option = {
		name = olavlund.1.d
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 3
				max_random_dip = 2
				change_adm = 3
				change_dip = 3
				change_mil = 2
				dynasty = "Halvarsson"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 1
				max_random_adm = 3
				max_random_dip = 2
				change_adm = 3
				change_dip = 3
				change_mil = 2
				dynasty = "Halvarsson"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_naugsvol
		}
	}
	
	#Redgarhavn - Diplomatic Candidate
	option = {
		name = olavlund.1.e
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 2
				max_random_dip = 3
				change_adm = 2
				change_dip = 3
				change_mil = 3
				dynasty = "av Redgarhvn"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 2
				max_random_dip = 3
				change_adm = 2
				change_dip = 3
				change_mil = 3
				dynasty = "av Redgarhavn"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_redgarhavn
		}
	}
	#Skaldskola - 
	option = {
		name = olavlund.1.f
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 5
				max_random_adm = 5
				max_random_dip = 5
				change_adm = 1
				change_dip = 1
				change_mil = 1
				dynasty = "av Nautakr"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 5
				max_random_adm = 5
				max_random_dip = 5
				change_adm = 1
				change_dip = 1
				change_mil = 1
				dynasty = "av Nautakr"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			set_ruler_flag = olavlund_nautakr
		}
	}
	
	# #New Anbennar one for liches
	option = {
		name = "magic_project_lichdom.12.c"	# Current ruler stays
		trigger = {
			ruler_is_immortal = yes
		}
		ai_chance = { 
			factor = 1000	
		}
		custom_tooltip = remains_ruler

		add_scaled_republican_tradition = -20
		add_karma = -5
	}
}

#Death elections
country_event = {
    id = olavlund.2
    title =  olavlund.2.t
    desc =  olavlund.2.d
    picture = ELECTION_REPUBLICAN_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        has_reform = olavish_clans
        NOT = { has_country_flag = in_olavish_election }
    }
    
    immediate = {
        hidden_effect = {
            set_country_flag = in_olavish_election
        }
    }
	
	after = {
		hidden_effect = {
            clr_country_flag = in_olavish_election
        }
	}
	
	#Avnkaup - Mixed Candidate
	option = {
		name = olavlund.2.a
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 3
				max_random_dip = 3
				change_adm = 2
				change_dip = 2
				change_mil = 2
				dynasty = "Vejordsson"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 3
				max_random_dip = 3
				change_adm = 2
				change_dip = 2
				change_mil = 2
				dynasty = "Vejordsson"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_avnkaup
		}
	}
	
	#Urkvistan - Military Candidate
	option = {
		name = olavlund.2.b
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 2
				max_random_dip = 2
				change_adm = 3
				change_dip = 2
				change_mil = 3
				dynasty = "Ebonfrost"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 3
				max_random_adm = 2
				max_random_dip = 2
				change_adm = 3
				change_dip = 2
				change_mil = 3
				dynasty = "Ebonfrost"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_urkvistan
		}
	}
	
	#Naugsvol - Administrative Candidate
	option = {
		name = olavlund.2.c
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 3
				max_random_dip = 2
				change_adm = 3
				change_dip = 3
				change_mil = 2
				dynasty = "Halvarsson"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 1
				max_random_adm = 3
				max_random_dip = 2
				change_adm = 3
				change_dip = 3
				change_mil = 2
				dynasty = "Halvarsson"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_redgarhavn
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_naugsvol
		}
	}
	
	#Redgarhavn - Diplomatic Candidate
	option = {
		name = olavlund.2.d
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 2
				max_random_dip = 3
				change_adm = 2
				change_dip = 3
				change_mil = 3
				dynasty = "av Redgarhvn"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 2
				max_random_adm = 2
				max_random_dip = 3
				change_adm = 2
				change_dip = 3
				change_mil = 3
				dynasty = "av Redgarhavn"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_nautakr
			set_ruler_flag = olavlund_redgarhavn
		}
	}
	#Skaldskola - 
	option = {
		name = olavlund.2.e
		if = {
			limit = { republic_with_female_rulers_trigger = yes }
			define_ruler = {
				max_random_mil = 5
				max_random_adm = 5
				max_random_dip = 5
				change_adm = 1
				change_dip = 1
				change_mil = 1
				dynasty = "av Nautakr"
				culture = olavish
				random_gender = yes # Allows random gender for republics
			}
		}
		else = {
			define_ruler = {
				max_random_mil = 5
				max_random_adm = 5
				max_random_dip = 5
				change_adm = 1
				change_dip = 1
				change_mil = 1
				dynasty = "av Nautakr"
				culture = olavish
			}
		}
		hidden_effect = {
			clr_ruler_flag = olavlund_avnkaup
			clr_ruler_flag = olavlund_urkvistan
			clr_ruler_flag = olavlund_naugsvol
			clr_ruler_flag = olavlund_redgarhavn
			set_ruler_flag = olavlund_nautakr
		}
	}
	
	# #New Anbennar one for liches
	option = {
		name = "magic_project_lichdom.12.c"	# Current ruler stays
		trigger = {
			ruler_is_immortal = yes
		}
		ai_chance = { 
			factor = 1000	
		}
		custom_tooltip = remains_ruler

		add_scaled_republican_tradition = -20
		add_karma = -5
	}
}





